name: test

on:
  push:
  pull_request:

jobs:
  # Temporarily disabled - macOS runner
  # lint:
  #   runs-on: macos-latest
  #   steps:
  #     - uses: actions/checkout@v4

  #     - name: Install swiftformat
  #       run: brew install swiftformat

  #     - name: Lint
  #       run: swiftformat --lint . --reporter github-actions-log

  smoke:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Checkout html5lib-tests
        uses: actions/checkout@v4
        with:
          repository: html5lib/html5lib-tests
          path: html5lib-tests

      - name: Setup Swift
        uses: swift-actions/setup-swift@v2
        with:
          swift-version: "6.0"

      - name: Build
        run: swift build

      - name: Run tests
        run: swift test

  # Temporarily disabled - macOS runner
  # macos:
  #   runs-on: macos-latest
  #   steps:
  #     - uses: actions/checkout@v4

  #     - name: Checkout html5lib-tests
  #       uses: actions/checkout@v4
  #       with:
  #         repository: html5lib/html5lib-tests
  #         path: html5lib-tests

  #     - name: Build
  #       run: swift build

  #     - name: Run tests
  #       run: swift test
